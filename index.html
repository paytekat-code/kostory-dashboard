<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KOSTORY Dashboard</title>
  <script type="module" src="script.js"></script>
  <style>
    /* CSS sama seperti sebelumnya – aku ringkas biar cepat */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
    body{background:#f0f4f8;color:#1e293b}
    .hidden{display:none!important}
    #loginScreen,#app{max-width:1200px;margin:20px auto;padding:20px}
    #header{background:linear-gradient(135deg,#1e3a8a,#0ea5e9);color:white;padding:20px 28px;border-radius:16px;display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}
    #totalStats{background:#2563eb;color:white;padding:22px;border-radius:16px;text-align:center;font-size:24px;font-weight:bold;margin-bottom:35px}
    .kost-card{background:white;border-radius:18px;padding:25px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}
    .room-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(115px,1fr));gap:18px}
    .room{background:#22c55e;color:white;padding:18px 10px;border-radius:16px;text-align:center;font-weight:bold;cursor:pointer}
    .room:hover{transform:translateY(-6px)}
    .room.kosong{background:#22c55e}
    .room.harian{background:#f59e0b;color:#000}
    .room.mingguan{background:#3b82f6}
    .room.bulanan{background:#ef4444}
    .room.tahunan{background:#1e293b;color:white}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;z-index:999}
    .modal-content{background:white;padding:38px;border-radius:20px;width:92%;max-width:480px}
    .modal-content h3{text-align:center;margin-bottom:30px;font-size:28px;color:#1e40af}
    .modal-content label{display:block;margin:20px 0 9px;font-weight:700}
    .modal-content input,.modal-content select,.modal-content textarea{width:100%;padding:16px;border:2px solid #e2e8f0;border-radius:14px;font-size:16px}
    .modal-buttons{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:35px}
    .modal-buttons button{padding:18px;border:none;border-radius:14px;color:white;font-weight:800;cursor:pointer}
    .modal-buttons button:nth-child(1){background:#dc2626}
    .modal-buttons button:nth-child(2){background:#16a34a}
    .modal-buttons button:nth-child(3){background:#ec4899}
    .modal-buttons button:nth-child(4){background:#64748b}
    .full{grid-column:1/-1}
    #tagihModal,#checkoutModal{position:fixed;inset:0;background:rgba(0,0,0,0.9);display:flex;justify-content:center;align-items:center;z-index:1000}
    #tagihBox,#checkoutBox{background:white;padding:35px;border-radius:20px;width:90%;max-width:460px}
    button{background:#1d4ed8;color:white;padding:16px;border:none;border-radius:12px;font-weight:bold;cursor:pointer;margin-top:10px}
  </style>
</head>
<body>

<!-- LOGIN & DASHBOARD SAMA -->

<div id="loginScreen"> ... </div>
<div id="app" class="hidden"> ... </div>

<!-- MODAL CHECK-IN -->
<div id="modal" class="modal hidden">
  <div class="modal-content">
    <h3 id="modalTitle">Check-in Kamar</h3>
    <label>Nama Penghuni (wajib)</label><input type="text" id="nama"/>
    <label>No. HP / WA (wajib)</label><input type="text" id="hp"/>
    <label>Tanggal Lahir (wajib)</label><input type="date" id="tanggalLahir"/>
    <label>Jenis Penghuni</label><select id="jenis"><option value="Pria">Pria</option><option value="Wanita">Wanita</option><option value="Suami-Istri">Suami-Istri</option><option value="Keluarga">Keluarga</option></select>
    <label>Durasi Kost</label><select id="durasi"><option value="Harian">Harian</option><option value="Mingguan">Mingguan</option><option value="Bulanan" selected>Bulanan</option><option value="Tahunan">Tahunan</option></select>
    <label>Kendaraan</label><select id="kendaraan"><option value="Umum">Umum</option><option value="Motor">Motor</option><option value="Mobil">Mobil</option></select>
    <label>Alamat KTP</label><input type="text" id="alamatktp"/>
    <label>Perusahaan / Kampus</label><input type="text" id="perusahaan"/>
    <label>Harga Kost per Periode</label><input type="number" id="harga"/>
    <label>Deposit (Rp)</label><input type="number" id="deposit"/>
    <label>Tanggal Check-in</label><input type="date" id="tanggal"/>
    <label>Token PLN Awal</label><input type="number" id="tokenAwal"/>
    <label>Nama Keluarga</label><input type="text" id="namaKeluarga"/>
    <label>Status Keluarga</label><select id="statusKeluarga"><option>Orangtua</option><option>Anak</option><option>Kakak/Adik</option><option>Lainnya</option></select>
    <label>No Telp Keluarga</label><input type="text" id="telpKeluarga"/>
    <label>Catatan</label><textarea id="catatan"></textarea>
    <div class="modal-buttons"></div>
  </div>
</div>

<!-- MODAL TAGIH – SUDAH DIPERBAIKI -->
<div id="tagihModal" class="hidden">
  <div id="tagihBox">
    <h3>TAGIHAN KOST</h3>
    <p style="font-size:18px;margin:15px 0"><strong id="tagihNama"></strong></p>
    <label>Tanggal Berakhir Kost</label>
    <input type="date" id="tagihTanggal"/>
    <label>Jumlah Tagihan (Rp)</label>
    <input type="number" id="tagihJumlah" placeholder="1200000"/>
    <button onclick="kirimTagihan()">KIRIM VIA WHATSAPP</button>
    <button onclick="document.getElementById('tagihModal').classList.add('hidden')" style="background:#6b7280">Batal</button>
  </div>
</div>

<!-- MODAL CHECK-OUT – SUDAH DIPERBAIKI -->
<div id="checkoutModal" class="hidden">
  <div id="checkoutBox">
    <h3>CHECK-OUT PENGHUNI</h3>
    <p style="text-align:center;margin-bottom:20px"><strong id="coNama"></strong> - Kamar <strong id="coKamar"></strong></p>
    <label>Tanggal Check-out</label><input type="date" id="tanggalCheckout"/>
    <label>Token PLN Akhir</label><input type="number" id="tokenAkhir"/>
    <label>No Rekening</label><input type="text" id="noRek"/>
    <label>Nama Bank</label><input type="text" id="namaBank"/>
    <label>Nama Rekening</label><input type="text" id="namaRekening"/>
    <button onclick="prosesCheckout()">CHECK-OUT & SHARE KE WA</button>
    <button onclick="document.getElementById('checkoutModal').classList.add('hidden')" style="background:#6b7280">BATAL</button>
  </div>
</div>

</body>
</html>
